<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}View Students{% endblock %}</title>
    <style>
        body { margin:0; font-family: Arial, sans-serif; background:#f4f7f8; }
        .sidebar { width:220px; background:#34495e; height:100vh; position:fixed; top:0; left:0; color:#ecf0f1; }
        .sidebar h2 { text-align:center; padding:20px 0; border-bottom:1px solid #2c3e50; }
        .sidebar ul { list-style:none; padding:0; }
        .sidebar ul li { padding:15px 20px; }
        .sidebar ul li a { color:#ecf0f1; text-decoration:none; display:block; }
        .sidebar ul li a:hover { background:#2c3e50; border-radius:4px; }
        .main-content { margin-left:220px; padding:20px; }
        header { background:#fff; padding:10px 20px; box-shadow:0 2px 5px rgba(0,0,0,0.1); margin-bottom:20px; }
        header h1 { margin:0; font-size:24px; }
        table { width:100%; border-collapse:collapse; background:#fff; border-radius:5px; overflow:hidden; }
        table th, table td { padding:12px; border-bottom:1px solid #ccc; text-align:left; }
        table th { background:#2980b9; color:#fff; }
        table tr:hover { background:#ecf0f1; }
    </style>
</head>
<body>
    <div class="sidebar">
        <h2>Instructor Panel</h2>
        <ul>
            <li><a href="{% url 'instructor_dashboard' %}">Dashboard</a></li>
            <li><a href="#" onclick="openLogoutModal()">Logout</a></li>
        </ul>
    </div>
    <div class="main-content">
        <header><h1>Students in Section: {{ section.name }}</h1></header>
        <table>
            <thead>
                <tr><th>ID</th><th>Username</th><th>Name</th><th>Role</th></tr>
            </thead>
            <tbody>
                {% for student in students %}
                <tr>
                    <td>{{ student.id }}</td>
                    <td>{{ student.username }}</td>
                    <td>{{ student.first_name }} {{ student.last_name }}</td>
                    <td>{{ student.role }}</td>
                </tr>
                {% empty %}
                <tr><td colspan="4">No students in this section.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Logout Confirmation Modal -->
    <div class="modal-overlay" id="logoutModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
        <div class="modal-content" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.3); max-width: 400px; width: 90%;">
            <div class="modal-header" style="margin-bottom: 20px; padding-bottom: 15px; border-bottom: 2px solid #e74c3c;">
                <h3 style="margin: 0; color: #e74c3c;"><i class="fas fa-sign-out-alt"></i> Confirm Logout</h3>
                <button class="modal-close" onclick="closeLogoutModal()" style="position: absolute; top: -10px; right: -10px; background: none; border: none; font-size: 24px; cursor: pointer; color: #666;">&times;</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 15px; font-weight: 600; color: #333;">
                    Are you sure you want to log out?
                </p>
                <p style="margin-bottom: 20px; font-size: 14px; color: #666;">
                    <i class="fas fa-info-circle"></i> You will need to log in again to access your dashboard.
                </p>
                <div class="modal-actions" style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button type="button" onclick="closeLogoutModal()" style="padding: 10px 20px; border: 1px solid #ddd; background: white; color: #333; border-radius: 4px; cursor: pointer;">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                    <a href="{% url 'logout' %}" style="padding: 10px 20px; background: #e74c3c; color: white; text-decoration: none; border-radius: 4px; display: inline-block;">
                        <i class="fas fa-sign-out-alt"></i> Yes, Logout
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        function openLogoutModal() {
            document.getElementById('logoutModal').style.display = 'block';
        }

        function closeLogoutModal() {
            document.getElementById('logoutModal').style.display = 'none';
        }

        document.getElementById('logoutModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeLogoutModal();
            }
        });
    </script>
</body>
</html>
